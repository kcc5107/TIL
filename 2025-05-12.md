# TIL: Spring 인터페이스와 DTO를 쓰는 이유, Conventional Commit


## 왜 인터페이스를 사용하는가?

Spring에서는 `@Service` 나 `@Repository` 클래스와 함께 **인터페이스를 분리**해서 사용하는 경우가 많다.  
이는 다음과 같은 이유와 장점 때문이다.

#### 1. 느슨한 결합 (Loose Coupling)
- 클라이언트(Controller 등)는 구체 클래스가 아닌 인터페이스에 의존하게 된다.
- 클래스 교체가 쉽고, 시스템 구조가 더 유연해짐.

#### 2. 테스트 용이성 (Testability)
- 인터페이스를 통해 실제 구현체 대신 **가짜(Mock) 구현체**를 주입할 수 있어, 단위 테스트가 쉬워진다.

#### 3. 확장성과 유지보수성
- 구현체를 바꿔도 인터페이스는 그대로 유지할 수 있어, 코드 유지보수와 리팩토링이 쉬워짐.

#### 4. 스프링 AOP와 프록시 기반 동작에 유리
- Spring AOP는 기본적으로 인터페이스 기반의 프록시를 사용.
- 인터페이스가 있을 경우 프록시 처리 방식이 더 안정적임.

#### 꼭 인터페이스가 필수는 아니지만, **규모가 커지거나 테스트가 중요한 프로젝트**에서는 장점이 분명하다.

---

## DTO를 쓰는 이유

| 이유                 | 설명                                                |
| ------------------ | ------------------------------------------------- |
| **보안/캡슐화**      | 엔티티에는 외부에 노출되면 안 되는 정보(예: 비밀번호, 내부 id 등)가 있을 수 있음 |
| **관심사 분리**      | DB 처리용(Entity)과 API 응답용(DTO)을 분리해서 각각의 책임을 명확히    |
| **포맷 변경 유연성**   | 클라이언트에 맞게 필드 이름 변경, 타입 변환 등을 DTO에서 자유롭게 할 수 있음    |
| **테스트/유지보수 편리** | 엔티티 구조가 바뀌어도 외부 API에는 영향 없도록 DTO로 방어 가능           |
| **엔티티 순환참조 방지** | JPA 연관관계(예: @OneToMany 등)를 그대로 응답에 쓰면 무한루프 발생 가능  |

---

## Conventional Commit

**Conventional Commit**은 Git 커밋 메시지에 일정한 규칙을 적용한 방식이다.  
코드 변경 사항의 **의미와 목적**을 명확히 전달하는 데 목적이 있다.

### 주요 Type 종류

- `feat`: 새로운 기능
- `fix`: 버그 수정
- `docs`: 문서 수정
- `style`: 포맷팅, 세미콜론 등 코드 변경 없는 수정
- `refactor`: 코드 리팩토링
- `test`: 테스트 코드 추가/수정
- `chore`: 빌드 관련 작업, 패키지 매니저 설정 등


### 50/72 규칙

커밋 메시지를 가독성 좋고 표준적으로 관리하기 위한 규칙이다.

- 제목 줄 (Subject): 50자 이내
- 본문 줄 (Body): 줄마다 72자 이내
- 제목과 본문 사이에는 한 줄 공백

예시) feat: 로그인 API 구현
- JWT 기반 로그인 구현
- 예외 처리 추가
- 테스트 코드 작성
