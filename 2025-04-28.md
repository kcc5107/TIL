# TIL

## 키오스크 과제 트러블슈팅 - 예외 처리 및 스캐너 입력값 검증

## 문제 상황
스캐너로 숫자를 입력받을 때마다 예외 처리가 필요했다.  
`InputMismatchException`이 발생하거나 **숫자 범위 외의 값**을 입력받을 때마다 예외 처리를 해야 했는데,  
여러 곳에서 비슷한 예외처리가 반복되면서 코드가 지저분해졌다. 
`throws`로 예외를 `main`으로 던지면 `main`에서 한 번에 예외를 처리할 수 있기 때문에 코드가 깔끔해지긴 하지만, 무한 루프가 깨지는 문제가 발생하였다.

## 해결 과정
### 1. throws 사용하여 main에서 예외 처리
`throws`로 예외를 `main`으로 던지는 방식은 간단하고 코드가 깔끔해지지만, 무한루프에서 벗어나는 것을 막기 위해  
`start()`메서드를 무한루프 해야하기 때문에 좋아보이지 않는 방법이고  
특히 예외의 종류가 늘어날 경우, 어떤 부분에서 예외가 발생한건지 파악하기 힘들 수 있기 때문에 장기적인 측면에선 좋아보이지 않았다.
```java
while (true) {
    try {
        kiosk.start();
    } catch (InputMismatchException e) {} 
    catch (IndexOutOfBoundsException e) {}
}
```
---

### 2. 입력 처리 메서드 분리
여러 번 반복되는 스캐너 예외 처리 코드를 별도의 메서드로 분리하여 코드 중복을 줄였다.  
메서드 안에서 예외 발생 시 `continue`를 사용하고 싶었으나 메서드 안에서는 사용 할 수 없었고 대신 -1을 반환해    
호출부에서는 그 값을 확인하여 추가적인 예외처리를 할 수 있게 하였다.
```java
private int scannerInt() {
    int num = -1;
    try {
        num = sc.nextInt();
    } catch (InputMismatchException e) {
        System.out.println("숫자를 입력해주세요.");
        sc.nextLine();
    }
    // -1을 리턴하게되면 그 뒤, switch문 default:에서 결국 index 예외 처리를 함
    return num;
}
```
---

## 회고
- 중복된 예외 처리를 메서드로 분리하여 코드 가독성과 재사용성을 높였다.
- `throws`로 예외를 던져서 처리하는 방식은 코드가 깔끔해지지만, 무한 루프 제어가 어려워질 수 있으므로 이 경우는 메서드 안에서 예외 처리를 해주는 것이 바람직하다.
- -1 반환 방식을 통해 예외를 회피하고 유효하지 않은 입력을 처리할 수 있다.


